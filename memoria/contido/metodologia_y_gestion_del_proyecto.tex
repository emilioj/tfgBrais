\chapter{Metodología y Gestión del proyecto}
\label{chap:mygp}
Este capítulo se centra en la organización del proyecto, la metodología utilizada y todo lo que a gestión de proyecto se refiere.
\section{Metodología}
Para el desarrollo del proyecto se decidió implementar una metodología \textit{Agile}. Este término se refiere a una metodología regida por una serie de principios que permiten ajustar la forma de trabajo a las condiciones del proyecto. Se debe priorizar a los individuos e interacciones sobre procesos y herramientas, asegurando no perder el valor humano de la comunicación no verbal en el proceso. También se debe atender antes a soluciones funcionales sobre la documentación exhaustiva. Lejos de procurar dejar de lado la documentación, es necesario tener en cuenta que el valor del desarrollo está en la funcionalidad del mismo, por lo que sacrificar tiempo de trabajo por documentar en exceso un proyecto puede acarrear resultados no deseados.

Otro pilar en el que se basa esta metodología es la respuesta al cambio sobre los planes preestablecidos, lo que asegura la versatilidad del proyecto aumentando las posibilidades de éxito.

Dada la naturaleza incremental e iterativa de la metodología \textit{Ágile}, es posible dividir el ciclo de vida del proyecto en tareas para facilitar el desarrollo. Esta aproximación permite aplicar el principio de «Divide y Vencerás» fragmentando la estimación de las tareas y su desarrollo con el fin de reducir la dificultad en el desarrollo. 

El proyecto se organizó en 21 tareas principales, agrupadas en 6 sprints, con una estimación total de 584 horas de trabajo. Destacar que dada la naturaleza del trabajo de fin de grado, se asume un único recurso humano, y por lo tanto no nos referiremos a las horas como horas por hombre o h × h. La tabla detallada de tareas con las estimaciones específicas se presenta en la \tablename~\ref{tab:tareas_completa}.

Para llevar a cabo las tareas se optó por un desarrollo en \textit{sprints}. Los sprints son los períodos de tiempo en los que se llevan a cabo las tareas. Estos se acotaron en el tiempo, dándoles siempre una longitud determinada, y a su vez se acotaron en funcionalidad procurando siempre que finalicen alcanzando algún hito del proyecto. Estos bloques o \textit{sprints} se fueron definiendo a lo largo del proyecto, adaptándose a las necesidades y riesgos del mismo.

\section{Sprints}
Tras introducir la metodología utilizada, vamos a detallar los sprints que tuvieron lugar en el proyecto, las tareas, los riesgos y recursos disponibles para cada uno.
\subsection{Extracción de un modelo a partir de un \acrshort{tc}}
En este sprint, se tuvo como objetivo el desarrollo de las tareas 1, 2, 3 y 4. Dado que en el estudio previo se encontraron varios caminos disponibles para alcanzar las tareas objetivo, el sprint se consideró viable en todo momento. Este sprint se llevó a cabo dentro del tiempo estimado de 2 semanas. El principal riesgo fue la complejidad de la pieza, que en una impresora 3D de filamento común podría haber alargado la impresión, o incluso fallar en el proceso. Esto se minimizó utilizando la impresora Fuse 1+ 30W capaz de imprimir modelos más complejos a pesar de tener una superficie de impresión más reducida.

\subsection{Diseño del marcador fiduciario y software de tracking}
Durante este sprint, se llevaron a cabo las tareas de la 5 a la 10. En este caso el mayor riesgo fue el tiempo de prototipado, ya que para una única pieza a imprimir, el tiempo de impresión oscila al rededor de las 15 horas. Para minimizar este riesgo se optó por realizar prototipos sobre papel como se comenta en la ejecución del proyecto. El tiempo estimado para este sprint fue de 3 semanas y media, pero debido a la dificultad de las tareas 7 y 8 se alargó a 5 semanas.

\subsection{Integrar solución de tracking en Exposure Render}
Las tareas de la 11 a la 14 se llevaron a cabo en este sprint. La compilación e instalación de todo el software necesario para ejecutar Exposure Render fue el riesgo por excelencia de este sprint. A pesar de esto se realizó dentro del tiempo estimado para ello ya que se conocía en el momento de la planificación.

\subsection{Integrar passthrough en Exposure Render}
Se llevaron a cabo las tareas de la 15 a la 18. En este sprint, nos encontramos con el mayor imprevisto del proyecto. El \acrshort{sdk} del \acrshort{hmd} no funcionaba correctamente, en lo que al trabajo con el vídeo procedente de las cámaras del casco se refiere, lo que imposibilitaba la reconstrucción de imágenes y causó un gran retraso en el proyecto respecto a la planificación inicial.

\subsection{Integrar con motor de render independiente}
En este sprint se ejecutaron las tareas 19 a 21, centradas en el desarrollo de una alternativa a Exposure Render. Después de varios intentos fallidos de integrar el sistema de seguimiento en Exposure Render durante varias semanas, se decidió descartar esta opción debido a incompatibilidades técnicas y limitaciones en la integración. En su lugar, se diseñó e implementó una solución utilizando un motor de render independiente basado en OpenGL. Se llevaron a cabo pruebas exhaustivas para validar el funcionamiento del sistema y se ajustaron los parámetros necesarios para asegurar una ejecución óptima y estable.

\section{Planificación temporal}
La planificación temporal del proyecto se organizó en sprints de duración variable, adaptándose a la complejidad de las tareas y los riesgos identificados. La \tablename~\ref{tab:tareas_completa} presenta el detalle de todas las tareas llevadas a cabo, y el sprint en el que se desarrollaron. El diagrama de Gantt completo con la distribución temporal detallada de todas las tareas se puede consultar en la \tablename~\ref{fig:gantt_completo}.

\begin{table}
  \centering
  \rowcolors{2}{white}{udcgray!25}
  \begin{tabular}{|c|p{7.5cm}|c|c|}
  \hline
  \rowcolor{udcpink!25}
  \textbf{Nº} & \textbf{Funcionalidad} & \textbf{Est. (H)} & \textbf{Sprint} \\\hline
  1     &   Importar datos en formato DICOM en 3D Slicer    &   2     & 1 \\
  2     &   Generar secciones para exportación en 3DSlicer &   40    & 1 \\
  3     &   Arreglar modelo (hacerlo viable para impresión) &   12    & 1 \\
  4     &   Imprimir modelo                                  &   15    & 1 \\
  5     &   Instalar librerías necesarias para el desarrollo &   4     & 2 \\
  6     &   Familiarizarse con la librería                   &   12    & 2 \\
  7     &   Prototipar pruebas para tests                    &   40    & 2 \\
  8     &   Implementar herramienta para tracking del marcador &   40    & 2 \\  
  9     &   Testear prototipos                               &   25    & 2 \\
  10    &   Generar modelo a partir del prototipo final      &   33    & 2 \\
  11    &   Imprimir prototipo final                         &   16    & 3 \\
  12    &   Instalar y compilar Exposure Render              &   80    & 3 \\
  13    &   Familiarizarse con Exposure Render               &   20    & 3 \\
  14    &   Implementar captura de imagen                    &   30    & 4 \\
  15    &   Integrar sistema de tracking                     &   40    & 4 \\
  16    &   Validar sistema integrado                        &   15    & 4 \\
  17    &   Diseñar motor de render alternativo              &   25    & 5 \\
  18    &   Implementar solución OpenGL                      &   60    & 5 \\
  19    &   Validar solución independiente                   &   20    & 5 \\
  20    &   Redacción de memoria                             &   80    & 6 \\
  21    &   Revisión final del proyecto                      &   15    & 6 \\
  \hline
  \multicolumn{2}{|c|}{\textbf{Total}} & \textbf{584} & \\
  \hline
  \end{tabular}
  \caption{Tareas del proyecto con estimaciones detalladas y asignación a sprints.}
  \label{tab:tareas_completa}
\end{table}

\begin{figure}
  \centering
  \begin{ganttchart}[
    hgrid,
    vgrid,
    time slot unit=day,
    x unit=0.5cm,
    y unit chart=0.5cm,
    bar height=0.5,
    bar/.style={fill=udcpink!50},
    group/.style={draw=black, fill=udcgray!25},
    title/.style={draw=none, fill=none},
    title height=1,
    group top shift=0.3,
    group height=0.25,
    bar top shift=0.3,
    title label anchor/.style={below=-1.6ex},
    bar label anchor/.style={left=1ex},
    group label anchor/.style={left=1ex},
    bar label font=\footnotesize,
    group label font=\footnotesize
  ]{1}{20}
    \gantttitle{Planificación Completa del Proyecto (semanas)}{20} \\
    \gantttitlelist{1,...,20}{1} \\
    \ganttgroup{Sprint 1: Extracción TC}{1}{2} \\
    \ganttbar{Importar datos DICOM (T1)}{1}{1} \\
    \ganttbar{Generar secciones (T2)}{1}{2} \\
    \ganttbar{Arreglar modelo (T3)}{2}{2} \\
    \ganttbar{Imprimir modelo (T4)}{2}{2} \\[grid]
    \ganttgroup{Sprint 2: Diseño marcador}{3}{7} \\
    \ganttbar{Instalar librerías (T5)}{3}{3} \\
    \ganttbar{Familiarizar librería (T6)}{3}{4} \\
    \ganttbar{Prototipar pruebas (T7)}{4}{6} \\
    \ganttbar{Implementar tracking (T8)}{5}{7} \\
    \ganttbar{Testear prototipos (T9)}{6}{7} \\
    \ganttbar{Generar modelo final (T10)}{7}{7} \\[grid]
    \ganttgroup{Sprint 3: Integración Exposure}{8}{10} \\
    \ganttbar{Imprimir prototipo (T11)}{8}{9} \\
    \ganttbar{Instalar Exposure (T12)}{8}{10} \\
    \ganttbar{Familiarizar software (T13)}{9}{10} \\[grid]
    \ganttgroup{Sprint 4: Passthrough}{11}{13} \\
    \ganttbar{Implementar captura (T14)}{11}{12} \\
    \ganttbar{Integrar tracking (T15)}{12}{13} \\
    \ganttbar{Validar sistema (T16)}{13}{13} \\[grid]
    \ganttgroup{Sprint 5: Motor independiente}{14}{18} \\
    \ganttbar{Diseñar alternativa (T17)}{14}{15} \\
    \ganttbar{Implementar OpenGL (T18)}{15}{17} \\
    \ganttbar{Validar solución (T19)}{17}{18} \\[grid]
    \ganttgroup{Documentación y cierre}{18}{20} \\
    \ganttbar{Redacción memoria (T20)}{18}{19} \\
    \ganttbar{Revisión final (T21)}{19}{20} \\
  \end{ganttchart}
  \caption{Diagrama de Gantt completo del proyecto mostrando todos los sprints, tareas y dependencias temporales.}
  \label{fig:gantt_completo}
\end{figure}
